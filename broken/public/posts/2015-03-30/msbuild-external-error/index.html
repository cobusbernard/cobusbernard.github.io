<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    
    <link rel="canonical" href="https://cobus.io/posts/2015-03-30/msbuild-external-error/">
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.126.1">

    
    
    

<title>External MSBuild for WebApi in VS 2013 fails â€¢ (thoughts) =&gt; TryParse(thoughts, out blog)</title>



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="External MSBuild for WebApi in VS 2013 fails">
  <meta name="twitter:description" content="MSBuild Error MSB4019 when running outside of Visual Studio 2013. MSB4019.png">

<meta property="og:url" content="https://cobus.io/posts/2015-03-30/msbuild-external-error/">
  <meta property="og:site_name" content="(thoughts) =&gt; TryParse(thoughts, out blog)">
  <meta property="og:title" content="External MSBuild for WebApi in VS 2013 fails">
  <meta property="og:description" content="MSBuild Error MSB4019 when running outside of Visual Studio 2013. MSB4019.png">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2015-03-30T00:00:00+00:00">
    <meta property="article:modified_time" content="2015-03-30T00:00:00+00:00">
    <meta property="article:tag" content="Msbuild">
    <meta property="article:tag" content="Errors">
    <meta property="article:tag" content="Visualstudio">
    <meta property="article:tag" content="Csharp">


    






<link rel="stylesheet" href="/scss/triple-hyde.scss" integrity="">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
  <span class="site__title">
    <a href="https://cobus.io/">
    
      (thoughts) =&gt; TryParse(thoughts, out blog)
    
    </a>
  </span>
  
  
  <p class="site__description">
    
  </p>
</div>

    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">(thoughts) =&gt; TryParse(thoughts, out blog)</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		
	</ul>
</div>

        <section class="social">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>External MSBuild for WebApi in VS 2013 fails</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Mar 30, 2015
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/dotnet">DOTNET</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/msbuild">msbuild</a>
           
      
          <a class="badge badge-tag" href="/tags/errors">errors</a>
           
      
          <a class="badge badge-tag" href="/tags/visualstudio">visualstudio</a>
           
      
          <a class="badge badge-tag" href="/tags/csharp">csharp</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 1 min read
</div>


  </header>
  
  
  <div class="post">
    <p>Earlier today, I ran into the following error when trying to build a new WebApi solution using the command-line and MSBuild:</p>
<p><img alt="MSB4019" src="./images/MSB4019.png"></p>
<p>This is odd as v11 is Visual Studio 2012 and don&rsquo;t even have 2012 installed. The issue manifests when you try to build the solution with: <code>msbuild /t:Clean;Rebuild /v:q /p:Configuration=$projectConfig $source_dir\$projectName.sln /p:Platform=&quot;Any CPU&quot;</code></p>
<p>The cause and solution is discussed on <a href="http://stackoverflow.com/questions/12026754/msbuild-deploy-failing-after-upgrade-to-net-4-5">Stack Overflow</a> - TL;DR version is this is due to adding the feature for older versions of Visual Studio, but then not setting the correct version number. To fix the issues, remove the following lines from your csproj file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;PropertyGroup&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;VisualStudioVersion</span> <span style="color:#a6e22e">Condition=</span><span style="color:#e6db74">&#34;&#39;$(VisualStudioVersion)&#39; == &#39;&#39;&#34;</span><span style="color:#f92672">&gt;</span>10.0<span style="color:#f92672">&lt;/VisualStudioVersion&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;VSToolsPath</span> <span style="color:#a6e22e">Condition=</span><span style="color:#e6db74">&#34;&#39;$(VSToolsPath)&#39; == &#39;&#39;&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    $(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)<span style="color:#f92672">&lt;/VSToolsPath&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></div><p>After that, the build succeeds :)</p>
<p>P.S.: Even changing the <code>VisualStudioVersion</code> to <code>12.0</code> does not work.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/2015-02-27/git-checkout-ssh-vs-https/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Git checkout error for public repo</span>
    </a>
    
    
    <a href="/posts/2015-04-04/gitflow-semver-psake/" class="navigation-next">
      <span class="navigation-tittle">Using the Git tag as a version number via PSake</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    




    



    </body>
</html>
